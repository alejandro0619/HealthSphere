/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package views;

import customComps.BackgroundPanel;
import customComps.RoundedTextField;
import db.dao.PatientDAO;
import db.dao.RecordsDAO;
import db.entities.Patient;
import java.awt.Color;
import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import validations.EmailChecker;
import validations.FormValidator;
import validations.IDChecker;
import validations.PhoneChecker;

/**
 *
 * @author Nyderlin Rivas
 */
public class PatientInformation extends javax.swing.JFrame {

    /**
     * Creates new form PatientInformation2
     */
    public PatientInformation() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel6 = new javax.swing.JPanel();
        jPanel1 = new BackgroundPanel("/resources/Artboard 1.png");
        tabsViews = new javax.swing.JTabbedPane();
        panelPatientInfo = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        labelTittle = new javax.swing.JLabel();
        labelSubtittle = new javax.swing.JLabel();
        labelId = new javax.swing.JLabel();
        txtId = new javax.swing.JTextField();
        txtName = new javax.swing.JTextField();
        labelName = new javax.swing.JLabel();
        labelLastName = new javax.swing.JLabel();
        txtLastName = new javax.swing.JTextField();
        labelBirth = new javax.swing.JLabel();
        labelBirthPlace = new javax.swing.JLabel();
        labelAddress = new javax.swing.JLabel();
        txtBirth = new javax.swing.JTextField();
        combBirthPlace = new javax.swing.JComboBox<>();
        txtAddress = new javax.swing.JTextField();
        labelPhone = new javax.swing.JLabel();
        txtPhone = new javax.swing.JTextField();
        txtPhone2 = new javax.swing.JTextField();
        LabelSecondPhone = new javax.swing.JLabel();
        labelEmail = new javax.swing.JLabel();
        txtEmail = new javax.swing.JTextField();
        genreInput = new javax.swing.JComboBox<>();
        labelGender = new javax.swing.JLabel();
        labelInsurance = new javax.swing.JLabel();
        insurance = new javax.swing.JComboBox<>();
        panelMedicalInfo = new javax.swing.JPanel();
        labelBloodType = new javax.swing.JLabel();
        LabelTittle = new javax.swing.JLabel();
        labelState = new javax.swing.JLabel();
        statusInput = new javax.swing.JTextField();
        combPathologies = new javax.swing.JComboBox<>();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtPathologies = new javax.swing.JTextArea();
        LabelPathologies = new javax.swing.JLabel();
        LabelAllergies = new javax.swing.JLabel();
        combAllergies = new javax.swing.JComboBox<>();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtAllergies = new javax.swing.JTextArea();
        jScrollPane3 = new javax.swing.JScrollPane();
        txtAditionalInfo = new javax.swing.JTextArea();
        combBloodType = new javax.swing.JComboBox<>();
        labelAditionalInfo = new javax.swing.JLabel();
        LabelSubtittle = new javax.swing.JLabel();
        labelPathologies = new javax.swing.JLabel();
        labelAllergies = new javax.swing.JLabel();
        bttnSave = new javax.swing.JButton();
        bttnBack = new javax.swing.JButton();
        panelPatientFile = new javax.swing.JPanel();
        jFileChooser2 = new javax.swing.JFileChooser();

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setResizable(false);

        tabsViews.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

        panelPatientInfo.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
        panelPatientInfo.setBackground(new java.awt.Color(217, 217, 217,120));

        jButton1.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        jButton1.setText("Siguiente");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        panelPatientInfo.add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 520, 119, 37));

        labelTittle.setFont(new java.awt.Font("Hack", 0, 36)); // NOI18N
        labelTittle.setText("Datos del Paciente");
        panelPatientInfo.add(labelTittle, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 40, -1, -1));

        labelSubtittle.setFont(new java.awt.Font("Hack", 1, 14)); // NOI18N
        labelSubtittle.setText("Información Personal");
        panelPatientInfo.add(labelSubtittle, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 100, 187, -1));

        labelId.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelId.setText("Cédula o Pasaporte");
        panelPatientInfo.add(labelId, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 170, -1, -1));

        txtId.setForeground(new java.awt.Color(153, 153, 153));
        txtId.setText("V00000000");
        txtId.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtIdFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtIdFocusLost(evt);
            }
        });
        txtId.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtIdActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtId, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 210, 200, 31));

        txtName.setForeground(new java.awt.Color(153, 153, 153));
        txtName.setText("Ingrese Nombres");
        txtName.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtNameFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtNameFocusLost(evt);
            }
        });
        panelPatientInfo.add(txtName, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 210, 200, 31));

        labelName.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelName.setText("Nombres");
        panelPatientInfo.add(labelName, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 170, 98, 20));

        labelLastName.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelLastName.setText("Apellidos");
        panelPatientInfo.add(labelLastName, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 170, 116, -1));

        txtLastName.setForeground(new java.awt.Color(153, 153, 153));
        txtLastName.setText("Ingrese Apellidos");
        txtLastName.setToolTipText("");
        txtLastName.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtLastNameFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtLastNameFocusLost(evt);
            }
        });
        txtLastName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtLastNameActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtLastName, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 210, 190, 31));

        labelBirth.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelBirth.setText("Fecha de Nacimiento");
        panelPatientInfo.add(labelBirth, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 270, 174, -1));

        labelBirthPlace.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelBirthPlace.setText("Lugar de Nacimiento");
        panelPatientInfo.add(labelBirthPlace, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 280, 200, -1));

        labelAddress.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelAddress.setText("Dirección");
        panelPatientInfo.add(labelAddress, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 380, 89, 20));

        txtBirth.setForeground(new java.awt.Color(153, 153, 153));
        txtBirth.setText("YYYY-MM-DD");
        txtBirth.setToolTipText("");
        txtBirth.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtBirthFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtBirthFocusLost(evt);
            }
        });
        txtBirth.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtBirthActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtBirth, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 310, 200, 31));

        combBirthPlace.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Amazonas", "Anzoátegui", "Apure", "Aragua", "Barinas", "Bolívar", "Carabobo", "Cojedes", "Delta Amacuro", "Distrito Capital", "Falcón", "Guárico", "Lara", "Mérida", "Miranda", "Monagas", "Nueva Esparta", "Portuguesa", "Sucre", "Táchira", "Trujillo", "Vargas", "Yaracuy", "Zulia" }));
        combBirthPlace.setToolTipText("");
        panelPatientInfo.add(combBirthPlace, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 310, 200, 31));

        txtAddress.setForeground(new java.awt.Color(153, 153, 153));
        txtAddress.setText("Ingrese Direccion");
        txtAddress.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtAddressFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtAddressFocusLost(evt);
            }
        });
        txtAddress.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtAddressActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtAddress, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 420, 190, 32));

        labelPhone.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelPhone.setText("Teléfono de Contacto");
        panelPatientInfo.add(labelPhone, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 380, 213, -1));

        txtPhone.setForeground(new java.awt.Color(153, 153, 153));
        txtPhone.setText("+58212-1234567");
        txtPhone.setToolTipText("");
        txtPhone.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtPhoneFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtPhoneFocusLost(evt);
            }
        });
        txtPhone.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPhoneActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtPhone, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 420, 200, 31));

        txtPhone2.setForeground(new java.awt.Color(153, 153, 153));
        txtPhone2.setText("0212-1234567");
        txtPhone2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtPhone2FocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtPhone2FocusLost(evt);
            }
        });
        txtPhone2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPhone2ActionPerformed(evt);
            }
        });
        panelPatientInfo.add(txtPhone2, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 420, 200, 31));

        LabelSecondPhone.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        LabelSecondPhone.setText("Teléfono Secundario");
        panelPatientInfo.add(LabelSecondPhone, new org.netbeans.lib.awtextra.AbsoluteConstraints(700, 380, 200, -1));

        labelEmail.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelEmail.setText("Correo Electrónico");
        panelPatientInfo.add(labelEmail, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 480, 200, -1));

        txtEmail.setForeground(new java.awt.Color(153, 153, 153));
        txtEmail.setText("ejemplo@gmail.com");
        txtEmail.setToolTipText("");
        txtEmail.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtEmailFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtEmailFocusLost(evt);
            }
        });
        panelPatientInfo.add(txtEmail, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 520, 190, 31));

        genreInput.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Femenino", "Masculino" }));
        panelPatientInfo.add(genreInput, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 310, 200, 30));

        labelGender.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelGender.setText("Género");
        panelPatientInfo.add(labelGender, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 280, 200, -1));

        labelInsurance.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelInsurance.setText("Posee Seguro Médico");
        panelPatientInfo.add(labelInsurance, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 480, -1, -1));

        insurance.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Sí poseo seguro.", "No poseo seguro." }));
        panelPatientInfo.add(insurance, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 520, 200, 30));

        tabsViews.addTab("Información Personal", panelPatientInfo);

        panelMedicalInfo.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
        panelMedicalInfo.setBackground(new java.awt.Color(217, 217, 217,120));

        labelBloodType.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelBloodType.setText("Grupo Sanguineo");
        panelMedicalInfo.add(labelBloodType, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 130, 157, -1));

        LabelTittle.setFont(new java.awt.Font("Hack", 0, 36)); // NOI18N
        LabelTittle.setText("Datos Médicos");
        panelMedicalInfo.add(LabelTittle, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 20, -1, -1));

        labelState.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelState.setText("Estado");
        panelMedicalInfo.add(labelState, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 130, -1, -1));

        statusInput.setForeground(new java.awt.Color(153, 153, 153));
        statusInput.setText("Estado del Paciente");
        statusInput.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                statusInputFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                statusInputFocusLost(evt);
            }
        });
        panelMedicalInfo.add(statusInput, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 170, 190, 30));

        combPathologies.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Sí poseo", "No poseo" }));
        combPathologies.setToolTipText("Alergias");
        combPathologies.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                combPathologiesActionPerformed(evt);
            }
        });
        panelMedicalInfo.add(combPathologies, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 260, 190, 30));

        txtPathologies.setColumns(20);
        txtPathologies.setRows(5);
        jScrollPane1.setViewportView(txtPathologies);

        panelMedicalInfo.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 240, 260, 60));

        LabelPathologies.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        LabelPathologies.setText("Patólogias");
        panelMedicalInfo.add(LabelPathologies, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 220, -1, -1));

        LabelAllergies.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        LabelAllergies.setText("Descripción de Alergias");
        panelMedicalInfo.add(LabelAllergies, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 310, 240, 20));

        combAllergies.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Sí poseo", "No poseo" }));
        combAllergies.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                combAllergiesActionPerformed(evt);
            }
        });
        panelMedicalInfo.add(combAllergies, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 360, 190, 30));

        txtAllergies.setColumns(20);
        txtAllergies.setRows(5);
        jScrollPane2.setViewportView(txtAllergies);

        panelMedicalInfo.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 340, 260, 60));

        txtAditionalInfo.setColumns(20);
        txtAditionalInfo.setRows(5);
        jScrollPane3.setViewportView(txtAditionalInfo);

        panelMedicalInfo.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(320, 470, 390, 110));

        combBloodType.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { " A positivo (A+)", " A negativo (A-)", " B positivo (B+)", " B negativo (B-)", " AB positivo (AB+)", " AB negativo (AB-)", " O positivo (O+)", " O negativo (O-)" }));
        panelMedicalInfo.add(combBloodType, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 170, 210, 30));

        labelAditionalInfo.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelAditionalInfo.setText("Información Adicional");
        panelMedicalInfo.add(labelAditionalInfo, new org.netbeans.lib.awtextra.AbsoluteConstraints(410, 440, 190, 20));

        LabelSubtittle.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        LabelSubtittle.setText("Información Médica");
        panelMedicalInfo.add(LabelSubtittle, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 70, 160, 20));

        labelPathologies.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelPathologies.setText("Descripción de Patólogias");
        panelMedicalInfo.add(labelPathologies, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 210, -1, -1));

        labelAllergies.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        labelAllergies.setText("Alergias");
        panelMedicalInfo.add(labelAllergies, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 320, 70, 20));

        bttnSave.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        bttnSave.setText("Guardar");
        bttnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bttnSaveActionPerformed(evt);
            }
        });
        panelMedicalInfo.add(bttnSave, new org.netbeans.lib.awtextra.AbsoluteConstraints(860, 550, 119, 37));

        bttnBack.setFont(new java.awt.Font("Hack", 0, 14)); // NOI18N
        bttnBack.setText("Volver");
        bttnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bttnBackActionPerformed(evt);
            }
        });
        panelMedicalInfo.add(bttnBack, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 550, 119, 37));

        tabsViews.addTab("Información Médica", panelMedicalInfo);

        panelPatientFile.setBackground(new java.awt.Color(217, 217, 217,120));

        javax.swing.GroupLayout panelPatientFileLayout = new javax.swing.GroupLayout(panelPatientFile);
        panelPatientFile.setLayout(panelPatientFileLayout);
        panelPatientFileLayout.setHorizontalGroup(
            panelPatientFileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 1021, Short.MAX_VALUE)
        );
        panelPatientFileLayout.setVerticalGroup(
            panelPatientFileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jFileChooser2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 627, Short.MAX_VALUE)
        );

        tabsViews.addTab("Archivos del Paciente", panelPatientFile);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(tabsViews)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(tabsViews)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        String regex = "^\\d{4}-\\d{2}-\\d{2}$";
        boolean is_date_valid = txtBirth.getText().matches(regex);
        
        if (!new IDChecker(txtId.getText()).isValid() || (txtId.getText()).equals("V00000000") ) {
            JOptionPane.showMessageDialog(null, "Cédula Invalida", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (!is_date_valid) {
            JOptionPane.showMessageDialog(null, "Fecha inválida", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        
        if (!new PhoneChecker(txtPhone.getText()).isValid() || !new PhoneChecker(txtPhone2.getText()).isValid() || (txtPhone2.getText()).equals("0212-1234567") || (txtPhone.getText()).equals("+58212-1234567") ) {
            JOptionPane.showMessageDialog(null, "Números celulares inválidos", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        
        if (!new EmailChecker(txtEmail.getText()).isValid() || (txtEmail.getText()).equals("ejemplo@gmail.com")) {
            JOptionPane.showMessageDialog(null, "Correo Electrónico inválido", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (FormValidator.isFormValid(rootPane) == false) {
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (txtName.getText().equals("Ingrese Nombres")){
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (txtLastName.getText().equals("Ingrese Apellidos")){
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (txtAddress.getText().equals("Ingrese Direccion")){
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        
        
        tabsViews.setSelectedIndex(1);
    }//GEN-LAST:event_jButton1ActionPerformed

    private void txtIdFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtIdFocusGained

        if(txtId.getText().equals("V00000000")){
            txtId.setText("");
            txtId.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtIdFocusGained

    private void txtIdFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtIdFocusLost

        if(txtId.getText().equals("")){
            txtId.setText("V00000000");
            txtId.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtIdFocusLost

    private void txtIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtIdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtIdActionPerformed

    private void txtNameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtNameFocusGained
        // TODO add your handling code here:
        if(txtName.getText().equals("Ingrese Nombres")){
            txtName.setText("");
            txtName.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtNameFocusGained

    private void txtNameFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtNameFocusLost
        // TODO add your handling code here:
        if(txtName.getText().equals("")){
            txtName.setText("Ingrese Nombres");
            txtName.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtNameFocusLost

    private void txtLastNameFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtLastNameFocusGained
        // TODO add your handling code here:
        if(txtLastName.getText().equals("Ingrese Apellidos")){
            txtLastName.setText("");
            txtLastName.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtLastNameFocusGained

    private void txtLastNameFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtLastNameFocusLost
        // TODO add your handling code here:
        if(txtLastName.getText().equals("")){
            txtLastName.setText("Ingrese Apellidos");
            txtLastName.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtLastNameFocusLost

    private void txtLastNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtLastNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtLastNameActionPerformed

    private void txtBirthFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtBirthFocusGained
        // TODO add your handling code here:
        if(txtBirth.getText().equals("YYYY-MM-DD")){
            txtBirth.setText("");
            txtBirth.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtBirthFocusGained

    private void txtBirthFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtBirthFocusLost

        if(txtBirth.getText().equals("")){
            txtBirth.setText("YYYY-MM-DD");
            txtBirth.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtBirthFocusLost

    private void txtBirthActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtBirthActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtBirthActionPerformed

    private void txtAddressFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtAddressFocusGained
        // TODO add your handling code here:
        if(txtAddress.getText().equals("Ingrese Direccion")){
            txtAddress.setText("");
            txtAddress.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtAddressFocusGained

    private void txtAddressFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtAddressFocusLost
        // TODO add your handling code here:
        if(txtAddress.getText().equals("")){
            txtAddress.setText("Ingrese Direccion");
            txtAddress.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtAddressFocusLost

    private void txtAddressActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAddressActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtAddressActionPerformed

    private void txtPhoneFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtPhoneFocusGained

        if(txtPhone.getText().equals("+58212-1234567")){
            txtPhone.setText("");
            txtPhone.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtPhoneFocusGained

    private void txtPhoneFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtPhoneFocusLost

        if(txtPhone.getText().equals("")){
            txtPhone.setText("+58212-1234567");
            txtPhone.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtPhoneFocusLost

    private void txtPhone2FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtPhone2FocusGained
        // TODO add your handling code here:
        if(txtPhone2.getText().equals("0212-1234567")){
            txtPhone2.setText("");
            txtPhone2.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtPhone2FocusGained

    private void txtPhone2FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtPhone2FocusLost
        // TODO add your handling code here:
        if(txtPhone2.getText().equals("")){
            txtPhone2.setText("0212-1234567");
            txtPhone2.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtPhone2FocusLost

    private void txtPhone2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPhone2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtPhone2ActionPerformed

    private void txtEmailFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtEmailFocusGained
        // TODO add your handling code here:
        if(txtEmail.getText().equals("ejemplo@gmail.com")){
            txtEmail.setText("");
            txtEmail.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_txtEmailFocusGained

    private void txtEmailFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtEmailFocusLost
        // TODO add your handling code here:
        if(txtEmail.getText().equals("")){
            txtEmail.setText("ejemplo@gmail.com");
            txtEmail.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_txtEmailFocusLost

    private void statusInputFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_statusInputFocusGained
        // TODO add your handling code here:
        if(statusInput.getText().equals("Estado del Paciente")){
            statusInput.setText("");
            statusInput.setForeground(new Color(0,0,0));
        }
    }//GEN-LAST:event_statusInputFocusGained

    private void statusInputFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_statusInputFocusLost
        // TODO add your handling code here:
        if(statusInput.getText().equals("")){
            statusInput.setText("Estado del Paciente");
            statusInput.setForeground(new Color(153,153,153));
        }
    }//GEN-LAST:event_statusInputFocusLost

    private void combPathologiesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_combPathologiesActionPerformed
        // TODO add your handling code here:
        String value;
        value = (String) combPathologies.getSelectedItem();
        
        if(value.equals("Sí poseo")){
            txtPathologies.setVisible(true);
        }else{
            txtPathologies.setVisible(false);
        }

        
    }//GEN-LAST:event_combPathologiesActionPerformed

    private void combAllergiesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_combAllergiesActionPerformed
        // TODO add your handling code here:
        String value;
        value = (String) combAllergies.getSelectedItem();
        
        if(value.equals("Sí poseo")){
            txtAllergies.setVisible(true);
        }else{
            txtAllergies.setVisible(false);
        }
    }//GEN-LAST:event_combAllergiesActionPerformed

    private void bttnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bttnSaveActionPerformed
        // TODO add your handling code here:
        if (FormValidator.isFormValid(rootPane) == false) {
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique sus datos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (statusInput.getText().equals("Estado del Paciente")){
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos ", "Verifique los los campos", JOptionPane.WARNING_MESSAGE);
            return;
        }
        if (txtAditionalInfo.getText().isEmpty()) {
            JOptionPane.showMessageDialog(null, "No se permiten campos vacíos", "Verifique las Notas Adicionales", JOptionPane.WARNING_MESSAGE);
            return;
        }
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        
        
        try {
            Patient new_patient = new Patient(
                    txtPhone.getText(),
                    txtPhone2.getText(),
                    txtName.getText() + ' ' + txtLastName.getText(),
                    txtId.getText(),
                    null,
                    txtAddress.getText(),
                    dateFormat.parse(txtBirth.getText()),
                    txtEmail.getText(),
                    SessionManager.getInstance().getCurrentUser(),
                    (String) combBirthPlace.getSelectedItem(),
                    (String) genreInput.getSelectedItem()
                    
            );
            
            new PatientDAO().insertPatient(new_patient);
            
            int patientId = new RecordsDAO().getLastInsertId();
            
            System.out.print(patientId);
            
           db.entities.Record new_record;
            new_record = new db.entities.Record(
                    null, // id
                    new java.sql.Date(new Date().getTime()),// fecha actual
                    (String) combAllergies.getSelectedItem(),// alergias
                    txtAllergies.getText(),
                    (String) combPathologies.getSelectedItem(),// patologias
                    txtPathologies.getText(),
                    txtAditionalInfo.getText(),
                    patientId,
                    SessionManager.getInstance().getCurrentUser(),
                    statusInput.getText(), 
                    (String) combBloodType.getSelectedItem(),
                    (String) insurance.getSelectedItem()
            );
            
           
            new RecordsDAO().insertRecord(new_record);
            
            this.dispose();
            JOptionPane.showMessageDialog(null, "Registro Exitoso", "Paciente añadido correctamente", JOptionPane.INFORMATION_MESSAGE);
            new Dashboard().setVisible(true);
        } catch (ParseException ex) {
            Logger.getLogger(PatientInformation1.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(PatientInformation1.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_bttnSaveActionPerformed

    private void bttnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bttnBackActionPerformed
        // TODO add your handling code here:
        tabsViews.setSelectedIndex(0);
    }//GEN-LAST:event_bttnBackActionPerformed

    private void txtPhoneActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPhoneActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtPhoneActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(PatientInformation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(PatientInformation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(PatientInformation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(PatientInformation.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new PatientInformation().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel LabelAllergies;
    private javax.swing.JLabel LabelPathologies;
    private javax.swing.JLabel LabelSecondPhone;
    private javax.swing.JLabel LabelSubtittle;
    private javax.swing.JLabel LabelTittle;
    private javax.swing.JButton bttnBack;
    private javax.swing.JButton bttnSave;
    private javax.swing.JComboBox<String> combAllergies;
    private javax.swing.JComboBox<String> combBirthPlace;
    private javax.swing.JComboBox<String> combBloodType;
    private javax.swing.JComboBox<String> combPathologies;
    private javax.swing.JComboBox<String> genreInput;
    private javax.swing.JComboBox<String> insurance;
    private javax.swing.JButton jButton1;
    private javax.swing.JFileChooser jFileChooser2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JLabel labelAddress;
    private javax.swing.JLabel labelAditionalInfo;
    private javax.swing.JLabel labelAllergies;
    private javax.swing.JLabel labelBirth;
    private javax.swing.JLabel labelBirthPlace;
    private javax.swing.JLabel labelBloodType;
    private javax.swing.JLabel labelEmail;
    private javax.swing.JLabel labelGender;
    private javax.swing.JLabel labelId;
    private javax.swing.JLabel labelInsurance;
    private javax.swing.JLabel labelLastName;
    private javax.swing.JLabel labelName;
    private javax.swing.JLabel labelPathologies;
    private javax.swing.JLabel labelPhone;
    private javax.swing.JLabel labelState;
    private javax.swing.JLabel labelSubtittle;
    private javax.swing.JLabel labelTittle;
    private javax.swing.JPanel panelMedicalInfo;
    private javax.swing.JPanel panelPatientFile;
    private javax.swing.JPanel panelPatientInfo;
    private javax.swing.JTextField statusInput;
    private javax.swing.JTabbedPane tabsViews;
    private javax.swing.JTextField txtAddress;
    private javax.swing.JTextArea txtAditionalInfo;
    private javax.swing.JTextArea txtAllergies;
    private javax.swing.JTextField txtBirth;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtId;
    private javax.swing.JTextField txtLastName;
    private javax.swing.JTextField txtName;
    private javax.swing.JTextArea txtPathologies;
    private javax.swing.JTextField txtPhone;
    private javax.swing.JTextField txtPhone2;
    // End of variables declaration//GEN-END:variables
}
